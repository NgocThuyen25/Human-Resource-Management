<!DOCTYPE html>
<html
  lang="vi"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layout}"
>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>T·∫£i L√™n T√†i Li·ªáu - C√¥ng Ty</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap");

      main {
        font-family: "Inter", sans-serif;
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        min-height: 100vh;
      }

      .upload-container {
        background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
        border-radius: 16px;
        box-shadow: 0 4px 25px rgba(0, 0, 0, 0.1);
      }

      .drag-area {
        border: 2px dashed #d1d5db;
        border-radius: 12px;
        transition: all 0.3s ease;
      }

      .drag-area.active {
        border-color: #3b82f6;
        background-color: #eff6ff;
      }

      .drag-area:hover {
        border-color: #3b82f6;
      }

      .file-card {
        transition: all 0.3s ease;
        border-left: 4px solid transparent;
      }

      .file-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .progress-bar {
        transition: width 0.3s ease;
      }

      .gradient-text {
        background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .step-indicator {
        transition: all 0.3s ease;
      }

      .step-indicator.active {
        background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        color: white;
      }

      .tag-input {
        transition: all 0.2s ease;
      }

      .tag-input:focus {
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
      }

      .tag {
        animation: slideIn 0.3s ease;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateX(-10px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .pulse-button {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.02);
        }
        100% {
          transform: scale(1);
        }
      }
    </style>
  </head>
  <main layout:fragment="content" class="py-8 px-4 sm:px-6 lg:px-8">
    <!-- Header Section -->
    <div class="max-w-4xl mx-auto mb-8">
      <div class="text-center">
        <h1 class="text-3xl font-bold text-gray-900 mb-4">
          <span class="gradient-text">T·∫£i L√™n T√†i Li·ªáu</span> M·ªõi
        </h1>
        <p class="text-gray-600">
          Chia s·∫ª t√†i li·ªáu v√† t√†i nguy√™n v·ªõi to√†n c√¥ng ty
        </p>
      </div>
    </div>

    <!-- Steps Indicator -->
    <div class="max-w-4xl mx-auto mb-8">
      <div class="flex justify-center">
        <div class="flex items-center space-x-8">
          <div
            class="step-indicator active w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center font-semibold"
          >
            1
          </div>
          <div class="h-1 w-20 bg-gray-300"></div>
          <div
            class="step-indicator w-10 h-10 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center font-semibold"
          >
            2
          </div>
          <div class="h-1 w-20 bg-gray-300"></div>
          <div
            class="step-indicator w-10 h-10 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center font-semibold"
          >
            3
          </div>
        </div>
      </div>
      <div class="flex justify-center mt-4 text-sm text-gray-600">
        <span class="w-32 text-center">Ch·ªçn file</span>
        <span class="w-32 text-center">Th√¥ng tin</span>
        <span class="w-32 text-center">X√°c nh·∫≠n</span>
      </div>
    </div>

    <!-- Upload Form -->
    <div class="max-w-4xl mx-auto">
      <div class="upload-container p-8">
        <!-- Step 1: File Selection -->
        <div class="mb-8">
          <h2 class="text-xl font-bold text-gray-900 mb-4">
            Ch·ªçn T·ªáp ƒë·ªÉ T·∫£i L√™n
          </h2>

          <div class="drag-area p-8 text-center cursor-pointer" id="dragArea">
            <div class="mb-4">
              <span class="text-4xl">üìÅ</span>
            </div>
            <p class="text-gray-600 mb-2">
              K√©o th·∫£ file v√†o ƒë√¢y ho·∫∑c click ƒë·ªÉ ch·ªçn
            </p>
            <p class="text-sm text-gray-500 mb-4">
              H·ªó tr·ª£: PDF, DOC, DOCX, XLS, XLSX, PPT, PPTX, JPG, PNG, MP4 (t·ªëi
              ƒëa 100MB)
            </p>
            <button
              class="bg-blue-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors"
            >
              Ch·ªçn T·ªáp
            </button>
            <input
              type="file"
              id="fileInput"
              class="hidden"
              multiple
              accept=".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.jpg,.jpeg,.png,.mp4"
            />
          </div>
        </div>

        <!-- Selected Files Preview -->
        <div class="mb-8" id="filesPreview" style="display: none">
          <h3 class="text-lg font-semibold text-gray-900 mb-4">T·ªáp ƒë√£ ch·ªçn</h3>
          <div class="space-y-4" id="filesList">
            <!-- Files will be dynamically added here -->
          </div>
        </div>

        <!-- Step 2: File Information -->
        <div class="mb-8">
          <h2 class="text-xl font-bold text-gray-900 mb-4">
            Th√¥ng Tin T√†i Li·ªáu
          </h2>

          <div class="grid md:grid-cols-2 gap-6 mb-6">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Ti√™u ƒë·ªÅ *</label
              >
              <input
                type="text"
                required
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                placeholder="Nh·∫≠p ti√™u ƒë·ªÅ t√†i li·ªáu"
              />
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Danh m·ª•c *</label
              >
              <select
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              >
                <option value="">Ch·ªçn danh m·ª•c...</option>
                <option value="policy">Ch√≠nh s√°ch</option>
                <option value="procedure">Quy tr√¨nh</option>
                <option value="template">M·∫´u bi·ªÉu</option>
                <option value="report">B√°o c√°o</option>
                <option value="training">ƒê√†o t·∫°o</option>
                <option value="legal">Ph√°p l√Ω</option>
                <option value="finance">T√†i ch√≠nh</option>
                <option value="hr">Nh√¢n s·ª±</option>
              </select>
            </div>
          </div>

          <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >M√¥ t·∫£</label
            >
            <textarea
              rows="4"
              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              placeholder="M√¥ t·∫£ ng·∫Øn g·ªçn v·ªÅ t√†i li·ªáu..."
            ></textarea>
          </div>

          <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >Th·∫ª tags</label
            >
            <div class="border border-gray-300 rounded-lg p-3 min-h-12">
              <div class="flex flex-wrap gap-2 mb-2" id="tagsContainer">
                <!-- Tags will be dynamically added here -->
              </div>
              <input
                type="text"
                id="tagInput"
                class="tag-input w-full outline-none"
                placeholder="Nh·∫≠p tag v√† ·∫•n Enter..."
              />
            </div>
            <p class="text-sm text-gray-500 mt-1">·∫§n Enter ƒë·ªÉ th√™m tag</p>
          </div>

          <div class="grid md:grid-cols-2 gap-6">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Quy·ªÅn truy c·∫≠p *</label
              >
              <select
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              >
                <option value="public">To√†n c√¥ng ty</option>
                <option value="department">Theo ph√≤ng ban</option>
                <option value="management">Qu·∫£n l√Ω</option>
                <option value="private">Ri√™ng t∆∞</option>
              </select>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Ng√†y h·∫øt h·∫°n (n·∫øu c√≥)</label
              >
              <input
                type="date"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              />
            </div>
          </div>
        </div>

        <!-- Step 3: Additional Settings -->
        <div class="mb-8">
          <h2 class="text-xl font-bold text-gray-900 mb-4">C√†i ƒê·∫∑t B·ªï Sung</h2>

          <div class="space-y-4">
            <label class="flex items-center">
              <input
                type="checkbox"
                class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
              />
              <span class="ml-2 text-sm text-gray-700">Cho ph√©p b√¨nh lu·∫≠n</span>
            </label>

            <label class="flex items-center">
              <input
                type="checkbox"
                class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
              />
              <span class="ml-2 text-sm text-gray-700"
                >Y√™u c·∫ßu ph√™ duy·ªát tr∆∞·ªõc khi c√¥ng khai</span
              >
            </label>

            <label class="flex items-center">
              <input
                type="checkbox"
                class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
              />
              <span class="ml-2 text-sm text-gray-700"
                >Th√¥ng b√°o cho t·∫•t c·∫£ th√†nh vi√™n</span
              >
            </label>

            <label class="flex items-center">
              <input
                type="checkbox"
                class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
                checked
              />
              <span class="ml-2 text-sm text-gray-700">Cho ph√©p t·∫£i v·ªÅ</span>
            </label>
          </div>
        </div>

        <!-- Actions -->
        <div class="flex justify-between pt-6 border-t border-gray-200">
          <button
            class="px-6 py-3 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors"
          >
            H·ªßy b·ªè
          </button>
          <button
            class="bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors pulse-button"
          >
            T·∫£i L√™n
          </button>
        </div>
      </div>
    </div>

    <!-- Upload Guidelines -->
    <div class="max-w-4xl mx-auto mt-8">
      <div class="bg-blue-50 rounded-2xl p-6">
        <h3 class="text-lg font-semibold text-blue-900 mb-4">
          üìã H∆∞·ªõng D·∫´n T·∫£i L√™n
        </h3>
        <div class="grid md:grid-cols-2 gap-4 text-sm text-blue-800">
          <div>
            <p class="font-medium mb-2">Quy ƒë·ªãnh chung:</p>
            <ul class="space-y-1">
              <li>‚Ä¢ Ch·ªâ t·∫£i l√™n t√†i li·ªáu c√¥ng vi·ªác</li>
              <li>‚Ä¢ ƒê·∫∑t t√™n file r√µ r√†ng, d·ªÖ hi·ªÉu</li>
              <li>‚Ä¢ Ki·ªÉm tra b·∫£n quy·ªÅn tr∆∞·ªõc khi upload</li>
            </ul>
          </div>
          <div>
            <p class="font-medium mb-2">ƒê·ªãnh d·∫°ng h·ªó tr·ª£:</p>
            <ul class="space-y-1">
              <li>‚Ä¢ T√†i li·ªáu: PDF, DOC, DOCX</li>
              <li>‚Ä¢ B·∫£ng t√≠nh: XLS, XLSX</li>
              <li>‚Ä¢ Presentation: PPT, PPTX</li>
              <li>‚Ä¢ Media: JPG, PNG, MP4</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const dragArea = document.getElementById("dragArea");
        const fileInput = document.getElementById("fileInput");
        const filesPreview = document.getElementById("filesPreview");
        const filesList = document.getElementById("filesList");
        const tagInput = document.getElementById("tagInput");
        const tagsContainer = document.getElementById("tagsContainer");
        const uploadButton = document.querySelector(".pulse-button");

        let selectedFiles = [];
        let tags = [];

        // Drag and drop functionality
        ["dragenter", "dragover", "dragleave", "drop"].forEach((eventName) => {
          dragArea.addEventListener(eventName, preventDefaults, false);
        });

        function preventDefaults(e) {
          e.preventDefault();
          e.stopPropagation();
        }

        ["dragenter", "dragover"].forEach((eventName) => {
          dragArea.addEventListener(eventName, highlight, false);
        });

        ["dragleave", "drop"].forEach((eventName) => {
          dragArea.addEventListener(eventName, unhighlight, false);
        });

        function highlight() {
          dragArea.classList.add("active");
        }

        function unhighlight() {
          dragArea.classList.remove("active");
        }

        dragArea.addEventListener("drop", handleDrop, false);

        function handleDrop(e) {
          const dt = e.dataTransfer;
          const files = dt.files;
          handleFiles(files);
        }

        dragArea.addEventListener("click", () => {
          fileInput.click();
        });

        fileInput.addEventListener("change", (e) => {
          handleFiles(e.target.files);
        });

        function handleFiles(files) {
          selectedFiles = Array.from(files);
          updateFilesPreview();
        }

        function updateFilesPreview() {
          filesList.innerHTML = "";

          if (selectedFiles.length > 0) {
            filesPreview.style.display = "block";

            selectedFiles.forEach((file, index) => {
              const fileCard = document.createElement("div");
              fileCard.className = "file-card bg-gray-50 p-4 rounded-lg";
              fileCard.innerHTML = `
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <span class="text-xl">üìÑ</span>
                                    <div>
                                        <h4 class="font-medium text-gray-900 text-sm">${
                                          file.name
                                        }</h4>
                                        <p class="text-xs text-gray-500">${formatFileSize(
                                          file.size
                                        )}</p>
                                    </div>
                                </div>
                                <button class="text-red-500 hover:text-red-700" onclick="removeFile(${index})">
                                    ‚úï
                                </button>
                            </div>
                            <div class="mt-2 w-full bg-gray-200 rounded-full h-2">
                                <div class="progress-bar bg-blue-600 h-2 rounded-full" style="width: 0%"></div>
                            </div>
                        `;
              filesList.appendChild(fileCard);
            });
          } else {
            filesPreview.style.display = "none";
          }
        }

        function formatFileSize(bytes) {
          if (bytes === 0) return "0 Bytes";
          const k = 1024;
          const sizes = ["Bytes", "KB", "MB", "GB"];
          const i = Math.floor(Math.log(bytes) / Math.log(k));
          return (
            parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + " " + sizes[i]
          );
        }

        window.removeFile = function (index) {
          selectedFiles.splice(index, 1);
          updateFilesPreview();
        };

        // Tags functionality
        tagInput.addEventListener("keypress", function (e) {
          if (e.key === "Enter") {
            e.preventDefault();
            const tag = this.value.trim();
            if (tag && !tags.includes(tag)) {
              tags.push(tag);
              updateTags();
              this.value = "";
            }
          }
        });

        function updateTags() {
          tagsContainer.innerHTML = "";
          tags.forEach((tag, index) => {
            const tagElement = document.createElement("span");
            tagElement.className =
              "tag bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm flex items-center";
            tagElement.innerHTML = `
                        ${tag}
                        <span class="ml-2 cursor-pointer hover:text-blue-600" onclick="removeTag(${index})">‚úï</span>
                    `;
            tagsContainer.appendChild(tagElement);
          });
        }

        window.removeTag = function (index) {
          tags.splice(index, 1);
          updateTags();
        };

        // Form submission
        uploadButton.addEventListener("click", function () {
          if (selectedFiles.length === 0) {
            alert("Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt t·ªáp ƒë·ªÉ t·∫£i l√™n");
            return;
          }

          // Simulate upload progress
          const progressBars = document.querySelectorAll(".progress-bar");
          progressBars.forEach((bar, index) => {
            let width = 0;
            const interval = setInterval(() => {
              if (width >= 100) {
                clearInterval(interval);
                // Simulate completion
                setTimeout(() => {
                  alert(
                    `T√†i li·ªáu "${selectedFiles[index].name}" ƒë√£ ƒë∆∞·ª£c t·∫£i l√™n th√†nh c√¥ng!`
                  );
                }, 500);
              } else {
                width += 5;
                bar.style.width = width + "%";
              }
            }, 100);
          });
        });
      });
    </script>
  </main>
</html>
