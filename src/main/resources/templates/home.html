<!DOCTYPE html>
<html
  lang="vi"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layout}"
>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tổng Quan Hệ Thống</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap");

      body {
        font-family: "Inter", sans-serif;
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        min-height: 100vh;
      }

      .dashboard-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
      }

      .stat-card {
        background: white;
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        transition: all 0.3s ease;
        border-left: 4px solid transparent;
      }

      .stat-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
      }

      .stat-card.primary {
        border-left-color: #3b82f6;
      }
      .stat-card.success {
        border-left-color: #10b981;
      }
      .stat-card.warning {
        border-left-color: #f59e0b;
      }
      .stat-card.danger {
        border-left-color: #ef4444;
      }
      .stat-card.purple {
        border-left-color: #8b5cf6;
      }

      .chart-container {
        background: white;
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      }

      .recent-activity {
        background: white;
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      }

      .activity-item {
        border-left: 3px solid #3b82f6;
        padding: 16px;
        margin-bottom: 16px;
        background: #f8fafc;
        border-radius: 8px;
        transition: all 0.3s ease;
      }

      .activity-item:hover {
        transform: translateX(4px);
        background: #eff6ff;
      }

      .employee-card {
        background: white;
        border-radius: 12px;
        padding: 16px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
      }

      .employee-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .department-badge {
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 500;
      }

      .progress-bar {
        transition: width 0.5s ease-in-out;
      }

      .notification-dot {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      .gradient-text {
        background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .trend-indicator {
        display: inline-flex;
        align-items: center;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 500;
      }

      .trend-up {
        background: #dcfce7;
        color: #16a34a;
      }

      .trend-down {
        background: #fee2e2;
        color: #dc2626;
      }

      .status-online {
        width: 10px;
        height: 10px;
        background: #10b981;
        border-radius: 50%;
        display: inline-block;
      }

      .status-offline {
        width: 10px;
        height: 10px;
        background: #6b7280;
        border-radius: 50%;
        display: inline-block;
      }
    </style>
  </head>
  <main layout:fragment="content" class="py-8">
    <div class="dashboard-container">
      <!-- Header Section -->
      <div class="mb-8">
        <h1 class="text-3xl font-bold text-gray-900">
          <span class="gradient-text">Quản Trị Nhân Sự</span> - Tổng Quan
        </h1>
        <p class="text-gray-600 mt-2">
          Quản lý và theo dõi thông tin nhân sự toàn công ty
        </p>
      </div>

      <!-- Statistics Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8">
        <!-- Total Employees -->
        <div class="stat-card primary">
          <div class="flex items-center justify-between mb-4">
            <div
              class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"
            >
              <span class="text-2xl text-blue-600"
                ><i class="fa-solid fa-users"></i
              ></span>
            </div>
            <span class="trend-indicator trend-up">+8% ↗</span>
          </div>
          <h3 class="text-2xl font-bold text-gray-900 mb-2">245</h3>
          <p class="text-gray-600">Tổng nhân viên</p>
        </div>

        <!-- New Hires -->
        <div class="stat-card success">
          <div class="flex items-center justify-between mb-4">
            <div
              class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"
            >
              <span class="text-2xl text-green-600"
                ><i class="fa-solid fa-plane"></i
              ></span>
            </div>
            <span class="trend-indicator trend-up">+12% ↗</span>
          </div>
          <h3 class="text-2xl font-bold text-gray-900 mb-2">15</h3>
          <p class="text-gray-600">Nhân viên mới</p>
        </div>

        <!-- Turnover Rate -->
        <div class="stat-card danger">
          <div class="flex items-center justify-between mb-4">
            <div
              class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center"
            >
              <span class="text-2xl text-red-600"
                ><i class="fa-solid fa-trash"></i
              ></span>
            </div>
            <span class="trend-indicator trend-down">-3% ↘</span>
          </div>
          <h3 class="text-2xl font-bold text-gray-900 mb-2">5.2%</h3>
          <p class="text-gray-600">Tỷ lệ nghỉ việc</p>
        </div>

        <!-- Attendance -->
        <div class="stat-card warning">
          <div class="flex items-center justify-between mb-4">
            <div
              class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center"
            >
              <span class="text-2xl text-orange-600"
                ><i class="fa-solid fa-pen"></i
              ></span>
            </div>
            <span class="trend-indicator trend-up">+2% ↗</span>
          </div>
          <h3 class="text-2xl font-bold text-gray-900 mb-2">96.5%</h3>
          <p class="text-gray-600">Tỷ lệ chấm công</p>
        </div>

        <!-- Vacancies -->
        <div class="stat-card purple">
          <div class="flex items-center justify-between mb-4">
            <div
              class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center"
            >
              <span class="text-2xl text-purple-600"
                ><i class="fa-solid fa-briefcase"></i
              ></span>
            </div>
            <span class="trend-indicator trend-down">-5% ↘</span>
          </div>
          <h3 class="text-2xl font-bold text-gray-900 mb-2">8</h3>
          <p class="text-gray-600">Vị trí tuyển dụng</p>
        </div>
      </div>

      <!-- Main Content Grid -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
        <!-- Department Distribution -->
        <div class="chart-container">
          <div class="flex items-center justify-between mb-6">
            <h2 class="text-xl font-bold text-gray-900">
              Phân Bố Theo Phòng Ban
            </h2>
            <select class="border border-gray-300 rounded-lg px-3 py-1 text-sm">
              <option>Toàn công ty</option>
              <option>Theo chi nhánh</option>
            </select>
          </div>
          <canvas id="departmentChart" height="250"></canvas>
        </div>

        <!-- Gender Ratio -->
        <div class="chart-container">
          <div class="flex items-center justify-between mb-6">
            <h2 class="text-xl font-bold text-gray-900">Tỷ Lệ Giới Tính</h2>
            <select class="border border-gray-300 rounded-lg px-3 py-1 text-sm">
              <option>Toàn công ty</option>
              <option>Theo phòng ban</option>
            </select>
          </div>
          <canvas id="genderChart" height="250"></canvas>
        </div>
      </div>

      <!-- Bottom Grid -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <!-- Recent Activities -->
        <div class="recent-activity lg:col-span-2">
          <div class="flex items-center justify-between mb-6">
            <h2 class="text-xl font-bold text-gray-900">Hoạt Động Gần Đây</h2>
            <span
              class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm"
              >18 hoạt động</span
            >
          </div>

          <div class="space-y-4">
            <div class="activity-item">
              <div class="flex items-center justify-between mb-2">
                <span class="font-semibold text-gray-900"
                  >Nhân viên mới gia nhập</span
                >
                <span class="text-sm text-gray-500">2 giờ trước</span>
              </div>
              <p class="text-gray-600 text-sm">
                Nguyễn Văn A đã gia nhập phòng ban Kỹ thuật
              </p>
            </div>

            <div class="activity-item">
              <div class="flex items-center justify-between mb-2">
                <span class="font-semibold text-gray-900"
                  >Cập nhật thông tin</span
                >
                <span class="text-sm text-gray-500">5 giờ trước</span>
              </div>
              <p class="text-gray-600 text-sm">
                Hồ sơ nhân viên Trần Thị B đã được cập nhật
              </p>
            </div>

            <div class="activity-item">
              <div class="flex items-center justify-between mb-2">
                <span class="font-semibold text-gray-900"
                  >Đăng ký nghỉ phép</span
                >
                <span class="text-sm text-gray-500">1 ngày trước</span>
              </div>
              <p class="text-gray-600 text-sm">
                Lê Văn C đã đăng ký nghỉ phép từ 15/07 - 20/07
              </p>
            </div>

            <div class="activity-item">
              <div class="flex items-center justify-between mb-2">
                <span class="font-semibold text-gray-900"
                  >Đánh giá hiệu suất</span
                >
                <span class="text-sm text-gray-500">2 ngày trước</span>
              </div>
              <p class="text-gray-600 text-sm">
                Hoàn thành đánh giá hiệu suất quý II/2024
              </p>
            </div>
          </div>

          <button
            class="w-full mt-6 bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors"
          >
            Xem tất cả hoạt động
          </button>
        </div>

        <!-- Upcoming Events -->
        <div class="space-y-6">
          <div class="chart-container">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">
              Sự Kiện Sắp Tới
            </h3>
            <div class="space-y-4">
              <div
                class="flex items-center justify-between p-3 bg-blue-50 rounded-lg"
              >
                <div>
                  <div class="font-semibold text-blue-800">Sinh nhật</div>
                  <div class="text-sm text-gray-600">Nguyễn Văn D</div>
                </div>
                <div class="text-sm text-blue-600">15/07</div>
              </div>
              <div
                class="flex items-center justify-between p-3 bg-green-50 rounded-lg"
              >
                <div>
                  <div class="font-semibold text-green-800">Họp đánh giá</div>
                  <div class="text-sm text-gray-600">Phòng Kinh doanh</div>
                </div>
                <div class="text-sm text-green-600">18/07</div>
              </div>
              <div
                class="flex items-center justify-between p-3 bg-orange-50 rounded-lg"
              >
                <div>
                  <div class="font-semibold text-orange-800">Training</div>
                  <div class="text-sm text-gray-600">Kỹ năng quản lý</div>
                </div>
                <div class="text-sm text-orange-600">20/07</div>
              </div>
              <div
                class="flex items-center justify-between p-3 bg-purple-50 rounded-lg"
              >
                <div>
                  <div class="font-semibold text-purple-800">Team building</div>
                  <div class="text-sm text-gray-600">Toàn công ty</div>
                </div>
                <div class="text-sm text-purple-600">25/07</div>
              </div>
            </div>
          </div>

          <!-- Quick Stats -->
          <div class="chart-container">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">
              Thống Kê Nhanh
            </h3>
            <div class="space-y-3">
              <div>
                <div class="flex justify-between mb-1">
                  <span class="text-sm font-medium text-gray-700"
                    >Tỷ lệ đi làm đúng giờ</span
                  >
                  <span class="text-sm text-gray-500">94%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                  <div
                    class="progress-bar bg-green-600 h-2 rounded-full"
                    style="width: 94%"
                  ></div>
                </div>
              </div>
              <div>
                <div class="flex justify-between mb-1">
                  <span class="text-sm font-medium text-gray-700"
                    >Hoàn thành KPI</span
                  >
                  <span class="text-sm text-gray-500">87%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                  <div
                    class="progress-bar bg-blue-600 h-2 rounded-full"
                    style="width: 87%"
                  ></div>
                </div>
              </div>
              <div>
                <div class="flex justify-between mb-1">
                  <span class="text-sm font-medium text-gray-700"
                    >Đào tạo nội bộ</span
                  >
                  <span class="text-sm text-gray-500">75%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                  <div
                    class="progress-bar bg-purple-600 h-2 rounded-full"
                    style="width: 75%"
                  ></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Employee List -->
      <div class="mt-8">
        <div class="flex items-center justify-between mb-6">
          <h2 class="text-xl font-bold text-gray-900">Nhân Viên Mới Nhất</h2>
          <button
            class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors"
          >
            Xem tất cả
          </button>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          <div class="employee-card">
            <div class="flex items-center mb-4">
              <img
                src="https://placehold.co/50x50"
                alt="Ảnh nhân viên Nguyễn Văn A"
                class="w-12 h-12 rounded-full mr-3"
              />
              <div>
                <h4 class="font-semibold text-gray-900">Nguyễn Văn A</h4>
                <span class="text-sm text-gray-600">NV001</span>
              </div>
            </div>
            <div class="flex justify-between items-center mb-3">
              <span class="department-badge bg-blue-100 text-blue-800"
                >Kỹ thuật</span
              >
              <span class="status-online"></span>
            </div>
            <p class="text-sm text-gray-600 mb-3">Senior Developer</p>
            <div class="text-xs text-gray-500">Ngày vào: 01/07/2024</div>
          </div>

          <div class="employee-card">
            <div class="flex items-center mb-4">
              <img
                src="https://placehold.co/50x50"
                alt="Ảnh nhân viên Trần Thị B"
                class="w-12 h-12 rounded-full mr-3"
              />
              <div>
                <h4 class="font-semibold text-gray-900">Trần Thị B</h4>
                <span class="text-sm text-gray-600">NV002</span>
              </div>
            </div>
            <div class="flex justify-between items-center mb-3">
              <span class="department-badge bg-green-100 text-green-800"
                >Kinh doanh</span
              >
              <span class="status-online"></span>
            </div>
            <p class="text-sm text-gray-600 mb-3">Sales Manager</p>
            <div class="text-xs text-gray-500">Ngày vào: 28/06/2024</div>
          </div>

          <div class="employee-card">
            <div class="flex items-center mb-4">
              <img
                src="https://placehold.co/50x50"
                alt="Ảnh nhân viên Lê Văn C"
                class="w-12 h-12 rounded-full mr-3"
              />
              <div>
                <h4 class="font-semibold text-gray-900">Lê Văn C</h4>
                <span class="text-sm text-gray-600">NV003</span>
              </div>
            </div>
            <div class="flex justify-between items-center mb-3">
              <span class="department-badge bg-purple-100 text-purple-800"
                >Marketing</span
              >
              <span class="status-offline"></span>
            </div>
            <p class="text-sm text-gray-600 mb-3">Content Creator</p>
            <div class="text-xs text-gray-500">Ngày vào: 25/06/2024</div>
          </div>

          <div class="employee-card">
            <div class="flex items-center mb-4">
              <img
                src="https://placehold.co/50x50"
                alt="Ảnh nhân viên Phạm Thị D"
                class="w-12 h-12 rounded-full mr-3"
              />
              <div>
                <h4 class="font-semibold text-gray-900">Phạm Thị D</h4>
                <span class="text-sm text-gray-600">NV004</span>
              </div>
            </div>
            <div class="flex justify-between items-center mb-3">
              <span class="department-badge bg-orange-100 text-orange-800"
                >Nhân sự</span
              >
              <span class="status-online"></span>
            </div>
            <p class="text-sm text-gray-600 mb-3">HR Specialist</p>
            <div class="text-xs text-gray-500">Ngày vào: 20/06/2024</div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Initialize charts
      document.addEventListener("DOMContentLoaded", function () {
        // Department Distribution Chart
        const deptCtx = document
          .getElementById("departmentChart")
          .getContext("2d");
        new Chart(deptCtx, {
          type: "bar",
          data: {
            labels: [
              "Kỹ thuật",
              "Kinh doanh",
              "Marketing",
              "Nhân sự",
              "Tài chính",
              "Hành chính",
            ],
            datasets: [
              {
                label: "Số nhân viên",
                data: [85, 45, 32, 28, 35, 20],
                backgroundColor: [
                  "#3b82f6",
                  "#10b981",
                  "#8b5cf6",
                  "#f59e0b",
                  "#ef4444",
                  "#6b7280",
                ],
                borderRadius: 6,
              },
            ],
          },
          options: {
            responsive: true,
            plugins: {
              legend: {
                display: false,
              },
            },
            scales: {
              y: {
                beginAtZero: true,
                grid: {
                  drawBorder: false,
                },
              },
              x: {
                grid: {
                  display: false,
                },
              },
            },
          },
        });

        // Gender Ratio Chart
        const genderCtx = document
          .getElementById("genderChart")
          .getContext("2d");
        new Chart(genderCtx, {
          type: "doughnut",
          data: {
            labels: ["Nam", "Nữ", "Khác"],
            datasets: [
              {
                data: [145, 95, 5],
                backgroundColor: ["#3b82f6", "#ec4899", "#8b5cf6"],
                borderWidth: 0,
              },
            ],
          },
          options: {
            responsive: true,
            cutout: "70%",
            plugins: {
              legend: {
                position: "bottom",
              },
            },
          },
        });

        // Simulate progress bars animation
        setTimeout(() => {
          document.querySelectorAll(".progress-bar").forEach((bar) => {
            bar.style.transition = "width 2s ease-in-out";
          });
        }, 500);
      });
    </script>
  </main>
</html>
